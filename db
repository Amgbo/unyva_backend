CREATE SCHEMA "public";
CREATE SCHEMA "neon_auth";
CREATE TABLE "announcements" (
	"id" serial PRIMARY KEY,
	"title" varchar(255) NOT NULL,
	"content" text NOT NULL,
	"created_by" varchar(20),
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"updated_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"image_url" text
);
CREATE TABLE "cart" (
	"id" serial PRIMARY KEY,
	"student_id" varchar(20) UNIQUE,
	"product_id" integer UNIQUE,
	"quantity" integer DEFAULT 1,
	"added_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT "cart_student_id_product_id_key" UNIQUE("student_id","product_id"),
	CONSTRAINT "cart_quantity_check" CHECK (CHECK ((quantity > 0)))
);
CREATE TABLE "delete_account_requests" (
	"id" serial PRIMARY KEY,
	"full_name" varchar(255) NOT NULL,
	"student_id_or_email" varchar(255) NOT NULL,
	"deletion_message" text NOT NULL,
	"submitted_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"status" varchar(20) DEFAULT 'pending',
	CONSTRAINT "delete_account_requests_status_check" CHECK (CHECK (((status)::text = ANY ((ARRAY['pending'::character varying, 'approved'::character varying, 'rejected'::character varying])::text[]))))
);
CREATE TABLE "deliveries" (
	"id" serial PRIMARY KEY,
	"order_id" integer,
	"customer_id" varchar(20),
	"seller_id" varchar(20),
	"delivery_person_id" varchar(20),
	"pickup_hall_id" integer,
	"pickup_room_number" varchar(20),
	"delivery_hall_id" integer,
	"delivery_room_number" varchar(20),
	"status" varchar(20) DEFAULT 'pending',
	"delivery_fee" numeric(10, 2) DEFAULT '0' NOT NULL,
	"notes" text,
	"assigned_at" timestamp,
	"started_at" timestamp,
	"completed_at" timestamp,
	"rating" integer,
	"review" text,
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"updated_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT "deliveries_rating_check" CHECK (CHECK (((rating >= 1) AND (rating <= 5)))),
	CONSTRAINT "deliveries_status_check" CHECK (CHECK (((status)::text = ANY ((ARRAY['pending'::character varying, 'assigned'::character varying, 'in_progress'::character varying, 'completed'::character varying, 'cancelled'::character varying])::text[]))))
);
CREATE TABLE "delivery_codes" (
	"id" serial PRIMARY KEY,
	"code" varchar(20) NOT NULL CONSTRAINT "delivery_codes_code_key" UNIQUE,
	"is_used" boolean DEFAULT false,
	"used_by_student_id" varchar(20) DEFAULT NULL,
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"used_at" timestamp,
	"expires_at" timestamp
);
CREATE TABLE "orders" (
	"id" serial PRIMARY KEY,
	"order_number" varchar(50) NOT NULL CONSTRAINT "orders_order_number_key" UNIQUE,
	"customer_id" varchar(20),
	"seller_id" varchar(20),
	"product_id" integer,
	"quantity" integer DEFAULT 1 NOT NULL,
	"unit_price" numeric(10, 2) NOT NULL,
	"total_price" numeric(10, 2) NOT NULL,
	"delivery_option" varchar(20) NOT NULL,
	"delivery_fee" numeric(10, 2) DEFAULT '0',
	"status" varchar(20) DEFAULT 'pending',
	"payment_status" varchar(20) DEFAULT 'pending',
	"delivery_hall_id" integer,
	"delivery_room_number" varchar(20),
	"special_instructions" text,
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"updated_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT "orders_delivery_option_check" CHECK (CHECK (((delivery_option)::text = ANY ((ARRAY['pickup'::character varying, 'delivery'::character varying])::text[])))),
	CONSTRAINT "orders_payment_status_check" CHECK (CHECK (((payment_status)::text = ANY ((ARRAY['pending'::character varying, 'paid'::character varying, 'failed'::character varying, 'refunded'::character varying])::text[])))),
	CONSTRAINT "orders_quantity_check" CHECK (CHECK ((quantity > 0))),
	CONSTRAINT "orders_status_check" CHECK (CHECK (((status)::text = ANY ((ARRAY['confirmed'::character varying, 'processing'::character varying, 'assigned'::character varying, 'in_progress'::character varying, 'shipped'::character varying, 'delivered'::character varying, 'cancelled'::character varying])::text[]))))
);
CREATE TABLE "product_favorites" (
	"id" serial PRIMARY KEY,
	"product_id" integer UNIQUE,
	"student_id" varchar(20) UNIQUE,
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT "product_favorites_product_id_student_id_key" UNIQUE("product_id","student_id")
);
CREATE TABLE "product_images" (
	"id" serial PRIMARY KEY,
	"product_id" integer,
	"image_url" text NOT NULL,
	"thumbnail_url" text,
	"is_primary" boolean DEFAULT false,
	"upload_order" integer DEFAULT 0,
	"file_size" integer,
	"storage_path" text,
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE "product_price_history" (
	"id" serial PRIMARY KEY,
	"product_id" integer,
	"old_price" numeric(10, 2),
	"new_price" numeric(10, 2),
	"changed_by" varchar(20),
	"changed_at" timestamp DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE "product_reviews" (
	"id" serial PRIMARY KEY,
	"product_id" integer,
	"student_id" varchar(20),
	"rating" integer,
	"title" varchar(255),
	"comment" text NOT NULL,
	"order_id" integer,
	"is_verified" boolean DEFAULT false,
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"updated_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"parent_id" integer,
	"depth" integer DEFAULT 0,
	"thread_root_id" integer,
	CONSTRAINT "product_reviews_rating_check" CHECK (CHECK (((rating >= 0) AND (rating <= 5))))
);
CREATE TABLE "product_views" (
	"id" serial PRIMARY KEY,
	"product_id" integer,
	"student_id" varchar(20),
	"viewed_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"ip_address" varchar(45)
);
CREATE TABLE "products" (
	"id" serial PRIMARY KEY,
	"student_id" varchar(20),
	"title" varchar(255) NOT NULL,
	"price" numeric(10, 2) NOT NULL,
	"description" text NOT NULL,
	"category" varchar(50) NOT NULL,
	"condition" varchar(20) DEFAULT 'Good' NOT NULL,
	"contact_method" varchar(20) NOT NULL,
	"hall_id" integer,
	"room_number" varchar(20),
	"status" varchar(20) DEFAULT 'draft',
	"is_approved" boolean DEFAULT false,
	"view_count" integer DEFAULT 0,
	"price_negotiable" boolean DEFAULT false,
	"tags" text[],
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"updated_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"last_bumped_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"rating" numeric(3, 2) DEFAULT '0',
	"review_count" integer DEFAULT 0,
	"quantity" integer DEFAULT 1,
	CONSTRAINT "products_category_check" CHECK (CHECK (((category)::text = ANY ((ARRAY['Books'::character varying, 'Electronics'::character varying, 'Fashion'::character varying, 'Hostel Items'::character varying, 'Food'::character varying, 'Other'::character varying])::text[])))),
	CONSTRAINT "products_condition_check" CHECK (CHECK (((condition)::text = ANY ((ARRAY['New'::character varying, 'Used'::character varying, 'Like New'::character varying, 'Good'::character varying, 'Fair'::character varying])::text[])))),
	CONSTRAINT "products_contact_method_check" CHECK (CHECK (((contact_method)::text = ANY ((ARRAY['WhatsApp'::character varying, 'Call'::character varying, 'SMS'::character varying, 'in_app'::character varying])::text[])))),
	CONSTRAINT "products_price_check" CHECK (CHECK (((price >= (0)::numeric) AND (price <= (10000)::numeric)))),
	CONSTRAINT "products_quantity_check" CHECK (CHECK ((quantity >= 0))),
	CONSTRAINT "products_status_check" CHECK (CHECK (((status)::text = ANY ((ARRAY['draft'::character varying, 'available'::character varying, 'reserved'::character varying, 'sold'::character varying, 'archived'::character varying, 'pending'::character varying])::text[]))))
);
CREATE TABLE "service_bookings" (
	"id" serial PRIMARY KEY,
	"service_id" integer,
	"customer_id" varchar(20),
	"provider_id" varchar(20),
	"booking_date" date,
	"booking_time" time,
	"duration" integer,
	"status" varchar(20) DEFAULT 'pending',
	"price" numeric(10, 2) NOT NULL,
	"notes" text,
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"updated_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT "service_bookings_status_check" CHECK (CHECK (((status)::text = ANY ((ARRAY['pending'::character varying, 'confirmed'::character varying, 'in_progress'::character varying, 'completed'::character varying, 'cancelled'::character varying])::text[]))))
);
CREATE TABLE "service_categories" (
	"id" serial PRIMARY KEY,
	"name" varchar(50) NOT NULL CONSTRAINT "service_categories_name_key" UNIQUE,
	"description" text,
	"icon" varchar(50),
	"is_active" boolean DEFAULT true,
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE "service_images" (
	"id" serial PRIMARY KEY,
	"service_id" integer,
	"image_url" text NOT NULL,
	"thumbnail_url" text,
	"is_primary" boolean DEFAULT false,
	"upload_order" integer DEFAULT 0,
	"file_size" integer,
	"storage_path" text,
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE "service_notifications" (
	"id" serial PRIMARY KEY,
	"student_id" varchar(20),
	"type" varchar(50) NOT NULL,
	"title" varchar(255) NOT NULL,
	"message" text NOT NULL,
	"data" jsonb,
	"is_read" boolean DEFAULT false,
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT "service_notifications_type_check" CHECK (CHECK (((type)::text = ANY ((ARRAY['booking_request'::character varying, 'booking_confirmed'::character varying, 'booking_cancelled'::character varying, 'reminder'::character varying, 'payment_received'::character varying])::text[]))))
);
CREATE TABLE "service_reviews" (
	"id" serial PRIMARY KEY,
	"service_id" integer,
	"booking_id" integer,
	"customer_id" varchar(20),
	"provider_id" varchar(20),
	"rating" integer NOT NULL,
	"title" varchar(255),
	"comment" text,
	"is_verified" boolean DEFAULT false,
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"depth" integer DEFAULT 0,
	"thread_root_id" integer,
	"parent_id" integer,
	CONSTRAINT "service_reviews_rating_check" CHECK (CHECK ((((parent_id IS NULL) AND ((rating >= 1) AND (rating <= 5))) OR ((parent_id IS NOT NULL) AND ((rating IS NULL) OR (rating = 0))))))
);
CREATE TABLE "services" (
	"id" serial PRIMARY KEY,
	"student_id" varchar(20),
	"title" varchar(255) NOT NULL,
	"description" text NOT NULL,
	"price" numeric(10, 2) NOT NULL,
	"category" varchar(50) NOT NULL,
	"contact_method" varchar(20) NOT NULL,
	"hall_id" integer,
	"room_number" varchar(20),
	"status" varchar(20) DEFAULT 'draft',
	"is_approved" boolean DEFAULT false,
	"view_count" integer DEFAULT 0,
	"price_negotiable" boolean DEFAULT false,
	"tags" text[],
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"updated_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"last_bumped_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"availability_schedule" jsonb,
	"image_urls" text[],
	"rating" numeric(3, 2) DEFAULT '0',
	"review_count" integer DEFAULT 0,
	CONSTRAINT "services_category_check" CHECK (CHECK (((category)::text = ANY ((ARRAY['Tutoring'::character varying, 'Laundry & Cleaning'::character varying, 'Cooking & Meal Prep'::character varying, 'IT & Tech Support'::character varying, 'Graphic Design'::character varying, 'Other'::character varying])::text[])))),
	CONSTRAINT "services_contact_method_check" CHECK (CHECK (((contact_method)::text = ANY ((ARRAY['WhatsApp'::character varying, 'Call'::character varying, 'SMS'::character varying, 'in_app'::character varying])::text[])))),
	CONSTRAINT "services_price_check" CHECK (CHECK (((price >= (0)::numeric) AND (price <= (10000)::numeric)))),
	CONSTRAINT "services_status_check" CHECK (CHECK (((status)::text = ANY ((ARRAY['draft'::character varying, 'available'::character varying, 'reserved'::character varying, 'archived'::character varying])::text[]))))
);
CREATE TABLE "students" (
	"student_id" varchar(20) PRIMARY KEY,
	"first_name" varchar(100) NOT NULL,
	"last_name" varchar(100) NOT NULL,
	"email" varchar(150) NOT NULL CONSTRAINT "students_email_key" UNIQUE,
	"phone" varchar(20),
	"gender" varchar(10),
	"hall_of_residence" text,
	"date_of_birth" date,
	"profile_picture" text,
	"id_card" text,
	"password" text,
	"is_verified" boolean DEFAULT false,
	"verification_token" varchar(255),
	"role" varchar(20) DEFAULT 'buyer_seller',
	"delivery_code" varchar(20) DEFAULT NULL,
	"is_delivery_approved" boolean DEFAULT false,
	"university" varchar(255) DEFAULT NULL,
	"program" varchar(255) DEFAULT NULL,
	"graduation_year" integer,
	"rating" numeric(3, 2) DEFAULT '5.0',
	"total_ratings" integer DEFAULT 0,
	"room_number" varchar(20),
	"is_active_seller" boolean DEFAULT false,
	"is_active_service_provider" boolean DEFAULT false,
	"seller_rating" numeric(3, 2) DEFAULT '5.0',
	"seller_review_count" integer DEFAULT 0,
	"service_provider_rating" numeric(3, 2) DEFAULT '5.0',
	"service_review_count" integer DEFAULT 0,
	"delivery_rating" numeric(3, 2) DEFAULT '5.0',
	"delivery_review_count" integer DEFAULT 0,
	"total_transactions" integer DEFAULT 0,
	"last_active" timestamp DEFAULT CURRENT_TIMESTAMP,
	"profile_completion_score" integer DEFAULT 0,
	"preferred_contact_method" varchar(20) DEFAULT 'in_app',
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP,
	"registration_complete" boolean DEFAULT false,
	"has_paid" boolean DEFAULT false,
	"payment_date" timestamp,
	CONSTRAINT "chk_payment_date" CHECK (CHECK ((((has_paid = false) AND (payment_date IS NULL)) OR ((has_paid = true) AND (payment_date IS NOT NULL)))))
);
CREATE TABLE "university_halls" (
	"id" serial PRIMARY KEY,
	"full_name" varchar(100) NOT NULL CONSTRAINT "university_halls_full_name_key" UNIQUE,
	"short_name" varchar(20),
	"description" text,
	"location_zone" varchar(50),
	"is_active" boolean DEFAULT true,
	"created_at" timestamp DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE "neon_auth"."users_sync" (
	"raw_json" jsonb NOT NULL,
	"id" text PRIMARY KEY GENERATED ALWAYS AS ((raw_json ->> 'id'::text)) STORED,
	"name" text GENERATED ALWAYS AS ((raw_json ->> 'display_name'::text)) STORED,
	"email" text GENERATED ALWAYS AS ((raw_json ->> 'primary_email'::text)) STORED,
	"created_at" timestamp with time zone GENERATED ALWAYS AS (to_timestamp((trunc((((raw_json ->> 'signed_up_at_millis'::text))::bigint)::double precision) / (1000)::double precision))) STORED,
	"updated_at" timestamp with time zone,
	"deleted_at" timestamp with time zone
);
ALTER TABLE "announcements" ADD CONSTRAINT "announcements_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "students"("student_id") ON DELETE SET NULL;
ALTER TABLE "cart" ADD CONSTRAINT "cart_product_id_fkey" FOREIGN KEY ("product_id") REFERENCES "products"("id") ON DELETE CASCADE;
ALTER TABLE "cart" ADD CONSTRAINT "cart_student_id_fkey" FOREIGN KEY ("student_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
ALTER TABLE "deliveries" ADD CONSTRAINT "deliveries_customer_id_fkey" FOREIGN KEY ("customer_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
ALTER TABLE "deliveries" ADD CONSTRAINT "deliveries_delivery_hall_id_fkey" FOREIGN KEY ("delivery_hall_id") REFERENCES "university_halls"("id") ON DELETE SET NULL;
ALTER TABLE "deliveries" ADD CONSTRAINT "deliveries_delivery_person_id_fkey" FOREIGN KEY ("delivery_person_id") REFERENCES "students"("student_id") ON DELETE SET NULL;
ALTER TABLE "deliveries" ADD CONSTRAINT "deliveries_order_id_fkey" FOREIGN KEY ("order_id") REFERENCES "orders"("id") ON DELETE CASCADE;
ALTER TABLE "deliveries" ADD CONSTRAINT "deliveries_pickup_hall_id_fkey" FOREIGN KEY ("pickup_hall_id") REFERENCES "university_halls"("id") ON DELETE SET NULL;
ALTER TABLE "deliveries" ADD CONSTRAINT "deliveries_seller_id_fkey" FOREIGN KEY ("seller_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
ALTER TABLE "orders" ADD CONSTRAINT "orders_customer_id_fkey" FOREIGN KEY ("customer_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
ALTER TABLE "orders" ADD CONSTRAINT "orders_delivery_hall_id_fkey" FOREIGN KEY ("delivery_hall_id") REFERENCES "university_halls"("id") ON DELETE SET NULL;
ALTER TABLE "orders" ADD CONSTRAINT "orders_product_id_fkey" FOREIGN KEY ("product_id") REFERENCES "products"("id") ON DELETE CASCADE;
ALTER TABLE "orders" ADD CONSTRAINT "orders_seller_id_fkey" FOREIGN KEY ("seller_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
ALTER TABLE "product_favorites" ADD CONSTRAINT "product_favorites_product_id_fkey" FOREIGN KEY ("product_id") REFERENCES "products"("id") ON DELETE CASCADE;
ALTER TABLE "product_favorites" ADD CONSTRAINT "product_favorites_student_id_fkey" FOREIGN KEY ("student_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
ALTER TABLE "product_images" ADD CONSTRAINT "product_images_product_id_fkey" FOREIGN KEY ("product_id") REFERENCES "products"("id") ON DELETE CASCADE;
ALTER TABLE "product_price_history" ADD CONSTRAINT "product_price_history_changed_by_fkey" FOREIGN KEY ("changed_by") REFERENCES "students"("student_id") ON DELETE SET NULL;
ALTER TABLE "product_price_history" ADD CONSTRAINT "product_price_history_product_id_fkey" FOREIGN KEY ("product_id") REFERENCES "products"("id") ON DELETE CASCADE;
ALTER TABLE "product_reviews" ADD CONSTRAINT "product_reviews_parent_id_fkey" FOREIGN KEY ("parent_id") REFERENCES "product_reviews"("id") ON DELETE CASCADE;
ALTER TABLE "product_reviews" ADD CONSTRAINT "product_reviews_product_id_fkey" FOREIGN KEY ("product_id") REFERENCES "products"("id") ON DELETE CASCADE;
ALTER TABLE "product_reviews" ADD CONSTRAINT "product_reviews_student_id_fkey" FOREIGN KEY ("student_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
ALTER TABLE "product_views" ADD CONSTRAINT "product_views_product_id_fkey" FOREIGN KEY ("product_id") REFERENCES "products"("id") ON DELETE CASCADE;
ALTER TABLE "product_views" ADD CONSTRAINT "product_views_student_id_fkey" FOREIGN KEY ("student_id") REFERENCES "students"("student_id") ON DELETE SET NULL;
ALTER TABLE "products" ADD CONSTRAINT "products_hall_id_fkey" FOREIGN KEY ("hall_id") REFERENCES "university_halls"("id") ON DELETE SET NULL;
ALTER TABLE "products" ADD CONSTRAINT "products_student_id_fkey" FOREIGN KEY ("student_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
ALTER TABLE "service_bookings" ADD CONSTRAINT "service_bookings_customer_id_fkey" FOREIGN KEY ("customer_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
ALTER TABLE "service_bookings" ADD CONSTRAINT "service_bookings_provider_id_fkey" FOREIGN KEY ("provider_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
ALTER TABLE "service_bookings" ADD CONSTRAINT "service_bookings_service_id_fkey" FOREIGN KEY ("service_id") REFERENCES "services"("id") ON DELETE CASCADE;
ALTER TABLE "service_images" ADD CONSTRAINT "service_images_service_id_fkey" FOREIGN KEY ("service_id") REFERENCES "services"("id") ON DELETE CASCADE;
ALTER TABLE "service_notifications" ADD CONSTRAINT "service_notifications_student_id_fkey" FOREIGN KEY ("student_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
ALTER TABLE "service_reviews" ADD CONSTRAINT "service_reviews_booking_id_fkey" FOREIGN KEY ("booking_id") REFERENCES "service_bookings"("id") ON DELETE CASCADE;
ALTER TABLE "service_reviews" ADD CONSTRAINT "service_reviews_customer_id_fkey" FOREIGN KEY ("customer_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
ALTER TABLE "service_reviews" ADD CONSTRAINT "service_reviews_parent_id_fkey" FOREIGN KEY ("parent_id") REFERENCES "service_reviews"("id") ON DELETE CASCADE;
ALTER TABLE "service_reviews" ADD CONSTRAINT "service_reviews_provider_id_fkey" FOREIGN KEY ("provider_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
ALTER TABLE "service_reviews" ADD CONSTRAINT "service_reviews_service_id_fkey" FOREIGN KEY ("service_id") REFERENCES "services"("id") ON DELETE CASCADE;
ALTER TABLE "services" ADD CONSTRAINT "services_hall_id_fkey" FOREIGN KEY ("hall_id") REFERENCES "university_halls"("id") ON DELETE SET NULL;
ALTER TABLE "services" ADD CONSTRAINT "services_student_id_fkey" FOREIGN KEY ("student_id") REFERENCES "students"("student_id") ON DELETE CASCADE;
CREATE UNIQUE INDEX "announcements_pkey" ON "announcements" ("id");
CREATE INDEX "idx_announcements_created_at" ON "announcements" ("created_at");
CREATE INDEX "idx_announcements_created_by" ON "announcements" ("created_by");
CREATE UNIQUE INDEX "cart_pkey" ON "cart" ("id");
CREATE UNIQUE INDEX "cart_student_id_product_id_key" ON "cart" ("student_id","product_id");
CREATE INDEX "idx_cart_product_id" ON "cart" ("product_id");
CREATE INDEX "idx_cart_student_id" ON "cart" ("student_id");
CREATE UNIQUE INDEX "delete_account_requests_pkey" ON "delete_account_requests" ("id");
CREATE INDEX "idx_delete_account_requests_status" ON "delete_account_requests" ("status");
CREATE INDEX "idx_delete_account_requests_submitted_at" ON "delete_account_requests" ("submitted_at");
CREATE UNIQUE INDEX "deliveries_pkey" ON "deliveries" ("id");
CREATE INDEX "idx_deliveries_created_at" ON "deliveries" ("created_at");
CREATE INDEX "idx_deliveries_customer_id" ON "deliveries" ("customer_id");
CREATE INDEX "idx_deliveries_delivery_person_id" ON "deliveries" ("delivery_person_id");
CREATE INDEX "idx_deliveries_order_id" ON "deliveries" ("order_id");
CREATE INDEX "idx_deliveries_seller_id" ON "deliveries" ("seller_id");
CREATE INDEX "idx_deliveries_status" ON "deliveries" ("status");
CREATE UNIQUE INDEX "delivery_codes_code_key" ON "delivery_codes" ("code");
CREATE UNIQUE INDEX "delivery_codes_pkey" ON "delivery_codes" ("id");
CREATE INDEX "idx_orders_created_at" ON "orders" ("created_at");
CREATE INDEX "idx_orders_customer_id" ON "orders" ("customer_id");
CREATE INDEX "idx_orders_delivery_option" ON "orders" ("delivery_option");
CREATE INDEX "idx_orders_product_id" ON "orders" ("product_id");
CREATE INDEX "idx_orders_seller_id" ON "orders" ("seller_id");
CREATE INDEX "idx_orders_status" ON "orders" ("status");
CREATE UNIQUE INDEX "orders_order_number_key" ON "orders" ("order_number");
CREATE UNIQUE INDEX "orders_pkey" ON "orders" ("id");
CREATE INDEX "idx_product_favorites_product_id" ON "product_favorites" ("product_id");
CREATE INDEX "idx_product_favorites_student_id" ON "product_favorites" ("student_id");
CREATE UNIQUE INDEX "product_favorites_pkey" ON "product_favorites" ("id");
CREATE UNIQUE INDEX "product_favorites_product_id_student_id_key" ON "product_favorites" ("product_id","student_id");
CREATE INDEX "idx_product_images_product_id" ON "product_images" ("product_id");
CREATE UNIQUE INDEX "product_images_pkey" ON "product_images" ("id");
CREATE UNIQUE INDEX "product_price_history_pkey" ON "product_price_history" ("id");
CREATE INDEX "idx_product_reviews_created_at" ON "product_reviews" ("created_at");
CREATE INDEX "idx_product_reviews_depth" ON "product_reviews" ("depth");
CREATE INDEX "idx_product_reviews_parent_id" ON "product_reviews" ("parent_id");
CREATE INDEX "idx_product_reviews_parent_product" ON "product_reviews" ("parent_id","product_id");
CREATE INDEX "idx_product_reviews_product_id" ON "product_reviews" ("product_id");
CREATE INDEX "idx_product_reviews_rating" ON "product_reviews" ("rating");
CREATE INDEX "idx_product_reviews_student_id" ON "product_reviews" ("student_id");
CREATE INDEX "idx_product_reviews_thread_root" ON "product_reviews" ("thread_root_id");
CREATE INDEX "idx_product_reviews_updated_at" ON "product_reviews" ("updated_at");
CREATE UNIQUE INDEX "product_reviews_pkey" ON "product_reviews" ("id");
CREATE INDEX "idx_product_views_product_id" ON "product_views" ("product_id");
CREATE UNIQUE INDEX "product_views_pkey" ON "product_views" ("id");
CREATE INDEX "idx_products_category" ON "products" ("category");
CREATE INDEX "idx_products_created_at" ON "products" ("created_at");
CREATE INDEX "idx_products_hall_id" ON "products" ("hall_id");
CREATE INDEX "idx_products_last_bumped" ON "products" ("last_bumped_at");
CREATE INDEX "idx_products_price" ON "products" ("price");
CREATE INDEX "idx_products_quantity" ON "products" ("quantity");
CREATE INDEX "idx_products_status" ON "products" ("status");
CREATE INDEX "idx_products_student_id" ON "products" ("student_id");
CREATE INDEX "idx_products_tags" ON "products" USING gin ("tags");
CREATE UNIQUE INDEX "products_pkey" ON "products" ("id");
CREATE INDEX "idx_service_bookings_customer_id" ON "service_bookings" ("customer_id");
CREATE INDEX "idx_service_bookings_date" ON "service_bookings" ("booking_date");
CREATE INDEX "idx_service_bookings_provider_id" ON "service_bookings" ("provider_id");
CREATE INDEX "idx_service_bookings_service_id" ON "service_bookings" ("service_id");
CREATE INDEX "idx_service_bookings_status" ON "service_bookings" ("status");
CREATE UNIQUE INDEX "service_bookings_pkey" ON "service_bookings" ("id");
CREATE UNIQUE INDEX "service_categories_name_key" ON "service_categories" ("name");
CREATE UNIQUE INDEX "service_categories_pkey" ON "service_categories" ("id");
CREATE INDEX "idx_service_images_service_id" ON "service_images" ("service_id");
CREATE UNIQUE INDEX "service_images_pkey" ON "service_images" ("id");
CREATE INDEX "idx_service_notifications_created_at" ON "service_notifications" ("created_at");
CREATE INDEX "idx_service_notifications_is_read" ON "service_notifications" ("is_read");
CREATE INDEX "idx_service_notifications_student_id" ON "service_notifications" ("student_id");
CREATE UNIQUE INDEX "service_notifications_pkey" ON "service_notifications" ("id");
CREATE INDEX "idx_service_reviews_customer_id" ON "service_reviews" ("customer_id");
CREATE INDEX "idx_service_reviews_depth" ON "service_reviews" ("depth");
CREATE INDEX "idx_service_reviews_parent_id" ON "service_reviews" ("parent_id");
CREATE INDEX "idx_service_reviews_provider_id" ON "service_reviews" ("provider_id");
CREATE INDEX "idx_service_reviews_provider_parent" ON "service_reviews" ("provider_id","parent_id");
CREATE INDEX "idx_service_reviews_service_id" ON "service_reviews" ("service_id");
CREATE INDEX "idx_service_reviews_service_parent_depth" ON "service_reviews" ("service_id","parent_id","depth","created_at");
CREATE INDEX "idx_service_reviews_thread_created" ON "service_reviews" ("thread_root_id","created_at");
CREATE INDEX "idx_service_reviews_thread_root" ON "service_reviews" ("thread_root_id");
CREATE UNIQUE INDEX "service_reviews_pkey" ON "service_reviews" ("id");
CREATE INDEX "idx_services_category" ON "services" ("category");
CREATE INDEX "idx_services_created_at" ON "services" ("created_at");
CREATE INDEX "idx_services_hall_id" ON "services" ("hall_id");
CREATE INDEX "idx_services_last_bumped" ON "services" ("last_bumped_at");
CREATE INDEX "idx_services_price" ON "services" ("price");
CREATE INDEX "idx_services_rating" ON "services" ("rating");
CREATE INDEX "idx_services_review_count" ON "services" ("review_count");
CREATE INDEX "idx_services_status" ON "services" ("status");
CREATE INDEX "idx_services_student_id" ON "services" ("student_id");
CREATE INDEX "idx_services_tags" ON "services" USING gin ("tags");
CREATE UNIQUE INDEX "services_pkey" ON "services" ("id");
CREATE INDEX "idx_students_has_paid" ON "students" ("has_paid");
CREATE UNIQUE INDEX "students_email_key" ON "students" ("email");
CREATE UNIQUE INDEX "students_pkey" ON "students" ("student_id");
CREATE UNIQUE INDEX "university_halls_full_name_key" ON "university_halls" ("full_name");
CREATE UNIQUE INDEX "university_halls_pkey" ON "university_halls" ("id");
CREATE INDEX "users_sync_deleted_at_idx" ON "neon_auth"."users_sync" ("deleted_at");
CREATE UNIQUE INDEX "users_sync_pkey" ON "neon_auth"."users_sync" ("id");