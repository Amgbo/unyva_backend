<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unyva – Account Deletion Request</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8fafc;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #1e293b;
            text-align: center;
            margin-bottom: 20px;
            font-size: 28px;
        }
        .description {
            margin-bottom: 30px;
            font-size: 16px;
            color: #64748b;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
        }
        input[type="text"],
        input[type="email"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
            box-sizing: border-box;
        }
        input[type="text"]:focus,
        input[type="email"]:focus,
        textarea:focus {
            outline: none;
            border-color: #3b82f6;
        }
        textarea {
            resize: vertical;
            min-height: 100px;
        }
        .submit-btn {
            background-color: #dc2626;
            color: white;
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.3s;
        }
        .submit-btn:hover {
            background-color: #b91c1c;
        }
        .data-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e2e8f0;
        }
        .data-section h2 {
            color: #1e293b;
            font-size: 20px;
            margin-bottom: 20px;
        }
        .data-list {
            background-color: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #f59e0b;
        }
        .data-list h3 {
            margin-top: 0;
            color: #92400e;
            font-size: 16px;
        }
        .data-list ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .data-list li {
            margin-bottom: 8px;
            color: #64748b;
        }
        .warning {
            background-color: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 16px;
            margin-top: 20px;
        }
        .warning p {
            margin: 0;
            color: #92400e;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Unyva – Account Deletion Request</h1>

        <div class="description">
            <p>We understand that you may want to delete your account and associated data from Unyva. This action is permanent and cannot be undone. Please fill out the form below to submit your account deletion request.</p>
        </div>

        <form id="deleteForm">
            <div class="form-group">
                <label for="fullName">Full Name</label>
                <input type="text" id="fullName" name="Full Name" required>
            </div>

            <div class="form-group">
                <label for="studentId">Student ID or Email</label>
                <input type="text" id="studentId" name="Student ID or Email" required>
            </div>

            <div class="form-group">
                <label for="deletionMessage">"Delete my account" request message</label>
                <textarea id="deletionMessage" name="Deletion Request Message" placeholder="Please explain why you want to delete your account..." required></textarea>
            </div>

            <button type="submit" class="submit-btn">Submit Deletion Request</button>
        </form>

        <div class="data-section">
            <h2>What happens when you delete your account?</h2>

            <div class="data-list">
                <h3>Data that will be deleted:</h3>
                <ul>
                    <li>Account information (name, email, student ID)</li>
                    <li>Profile information and settings</li>
                    <li>Uploaded images and media</li>
                    <li>Product listings and service offerings</li>
                    <li>Order history and transaction records</li>
                    <li>Reviews and ratings you've given or received</li>
                </ul>
            </div>

            <div class="data-list">
                <h3>Data that may be kept temporarily:</h3>
                <ul>
                    <li>Anonymous usage statistics for platform improvement</li>
                    <li>Transaction records required for legal compliance (up to 7 years)</li>
                    <li>Backups for disaster recovery (up to 30 days)</li>
                </ul>
            </div>

            <div class="warning">
                <p><strong>Important:</strong> Once your account is deleted, you will lose access to all your data and cannot recover it. If you have active orders or ongoing transactions, please complete them before requesting deletion.</p>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('deleteForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const formData = new FormData(this);
            const data = {
                fullName: formData.get('Full Name'),
                studentId: formData.get('Student ID or Email'),
                deletionMessage: formData.get('Deletion Request Message')
            };

            try {
                const response = await fetch('/api/delete-account', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (response.ok) {
                    alert('Your account deletion request has been submitted successfully. An admin will review it shortly.');
                    this.reset();
                } else {
                    alert('Error: ' + (result.error || 'Failed to submit request'));
                }
            } catch (error) {
                console.error('Error submitting form:', error);
                alert('An error occurred while submitting your request. Please try again.');
            }
        });
    </script>
</body>
</html>
